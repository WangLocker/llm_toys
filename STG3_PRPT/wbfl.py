# 导入必要的库
import requests

# 定义后端服务的URL
url = 'http://localhost:12120/v1/chat/completions'

# 定义system提示词
system_prompt = '''
你是一个文本分类助手，用户将在与你的对话中输入若干段文本，用户的目的是得到一个长的json数组[]，里面的元素是各段文字所描述的物体所属的类型。
每段文本用数字序号开头，比如“1.”，“2.”等。
每一段文本均为一段对某一个具体的物体的描述，你的任务需要依次对每一段文字执行下列步骤：

step1：识别该段文字描述的物体具体是什么，答案来自于文中且唯一确定的一个物体。
step2：识别出该物体的类型（指的是比如“小说、电影、国家、人物“这样粒度的类型）。

然后当你处理完所有的文段之后，将各段文字识别出来的类型，按顺序装入一个方括号[]，并用逗号分隔返回给用户。

'''

# 接收user的问题
user_question = '''
1. 加拿大（英语/法语：Canada），首都渥太华，位于北美洲北部。东临大西洋，西濒太平洋，西北部邻美国阿拉斯加州，南接美国本土，北靠北冰洋。气候大部分为亚寒带针叶林气候和湿润大陆性气候，北部极地区域为极地长寒气候。
2. 《琅琊榜》是由山东影视传媒集团、山东影视制作有限公司、北京儒意欣欣影业投资有限公司、北京和颂天地影视文化有限公司、北京圣基影业有限公司、东阳正午阳光影视有限公司联合出品，由孔笙、李雪执导，胡歌、刘涛、王凯、黄维德、陈龙、吴磊、高鑫等主演的古装剧。
3. 《满江红》是由张艺谋执导，沈腾、易烊千玺、张译、雷佳音、岳云鹏、王佳怡领衔主演，潘斌龙、余皑磊主演，郭京飞、欧豪友情出演，魏翔、张弛、黄炎特别出演，许静雅、蒋鹏宇、林博洋、飞凡、任思诺、陈永胜出演的悬疑喜剧电影。
4. 布宜诺斯艾利斯（Buenos Aires，华人常简称为布宜诺斯）是阿根廷共和国（the Republic of Argentina，República Argentina）的首都和最大城市，位于拉普拉塔河南岸、南美洲东南部、河对岸为乌拉圭东岸共和国。
5. 张译（原名张毅），1978年2月17日出生于黑龙江省哈尔滨市，中国内地男演员。1997年至2006年服役于北京军区政治部战友话剧团。2006年，主演军事励志题材电视剧《士兵突击》。
'''

# 构建请求数据
request_data = {
    "model": "gpt-3.5-turbo",
    "messages": [
        {"role": "system", "content": system_prompt},
        {"role": "user", "content": user_question}
    ],
    "stream": False
}

# 发送请求
response = requests.post(url, json=request_data)

# 检查响应状态码

if response.status_code == 200:
    # 解析响应数据
    response_data = response.json()
    # 提取回答内容
    answer = response_data['choices'][0]['message']['content']
    # 打印回答
    print('回答:\n', answer)
else:
    print('请求失败，状态码:', response.status_code)

#文本分类任务的提示词
#system：
# 你需要进行文本实体识别和分类，用户将在与你的对话中输入“1.”，“2.”等数字序号开头的多段文本，你的任务是帮助识别出这几段话中，每一句话描述的物体的类型，请你先提取出每段文字描述的这件物体，然后识别出这些物体所属的类型（指的是比如“小说、电影、国家、人物这样粒度的类型”）。你的回答应该是一个用“[]”括起来的列表，列表中依次列出各段文字所描述的物体的类型。
#user：
# 1. 加拿大（英语/法语：Canada），首都渥太华，位于北美洲北部。东临大西洋，西濒太平洋，西北部邻美国阿拉斯加州，南接美国本土，北靠北冰洋。气候大部分为亚寒带针叶林气候和湿润大陆性气候，北部极地区域为极地长寒气候。
# 2. 《琅琊榜》是由山东影视传媒集团、山东影视制作有限公司、北京儒意欣欣影业投资有限公司、北京和颂天地影视文化有限公司、北京圣基影业有限公司、东阳正午阳光影视有限公司联合出品，由孔笙、李雪执导，胡歌、刘涛、王凯、黄维德、陈龙、吴磊、高鑫等主演的古装剧。
# 3. 《满江红》是由张艺谋执导，沈腾、易烊千玺、张译、雷佳音、岳云鹏、王佳怡领衔主演，潘斌龙、余皑磊主演，郭京飞、欧豪友情出演，魏翔、张弛、黄炎特别出演，许静雅、蒋鹏宇、林博洋、飞凡、任思诺、陈永胜出演的悬疑喜剧电影。
# 4. 布宜诺斯艾利斯（Buenos Aires，华人常简称为布宜诺斯）是阿根廷共和国（the Republic of Argentina，República Argentina）的首都和最大城市，位于拉普拉塔河南岸、南美洲东南部、河对岸为乌拉圭东岸共和国。
# 5. 张译（原名张毅），1978年2月17日出生于黑龙江省哈尔滨市，中国内地男演员。1997年至2006年服役于北京军区政治部战友话剧团。2006年，主演军事励志题材电视剧《士兵突击》。